---
# Test ansible is installed
- shell: ansible --version
  register: ansible
  changed_when: "ansible.rc != 0"

# Test that the jenkins.repo file has the correct md5 hash
- name: Get the md5 hash for /etc/yum.repos.d/jenkins.repo
  stat:
    path: /etc/yum.repos.d/jenkins.repo
  register: jenkins
  when: ansible_os_family == "RedHat"

- name: Verify the md5 hash matches
  fail: msg="md5 hashes don't match"
  when:
   - ansible_os_family == "RedHat"
   - jenkins.stat.md5 != "47918dacb93bfac3c8e29420678e8fa0"