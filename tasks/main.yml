---
- name: Install apt repositories
  apt_repository:
    repo: "{{ item.repo }}"
    state: "{{ item.state | default(apt_repository_state) }}"
  with_items: "{{ apt_repository }}"
  when: ansible_os_family == "Debian"

- name: Install pre-packages
  package:
    name: "{{ item.name }}"
    state: "{{ item.state | default(pre_package_state) }}"
  with_items: "{{ pre_package }}"

- name: Install packages
  package:
    name: "{{ item.name }}"
    state: "{{ item.state | default(package_state) }}"
  with_items: "{{ package }}"

- name: Install post-packages
  package:
    name: "{{ item.name }}"
    state: "{{ item.state | default(post_package_state) }}"
  with_items: "{{ post_package }}"
